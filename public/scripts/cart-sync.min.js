!function(){const t="https://arco-henna.vercel.app";let e=null;async function n(){try{const t=await fetch("/cart.js",{method:"GET",credentials:"include",headers:{Accept:"application/json"}});if(t.ok){return await t.json()}}catch(t){}return null}async function a(){if(!e)return null;try{const n=await fetch(`${t}/api/cart?userId=${encodeURIComponent(e)}`,{method:"GET",headers:{Accept:"application/json"}});if(n.ok){return(await n.json()).cart||null}}catch(t){}return null}async function i(n){if(!e)return null;try{await fetch(t+"/api/cart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,cartData:n||{}})})}catch(t){}}async function o(t){try{if(localStorage.setItem("cart_sync_reloaded","1"),await fetch("/cart/clear.js",{method:"POST",credentials:"include"}),t&&t.items&&t.items.length>0){const e=t.items.map((t=>({id:t.shopifyVariantId||t.variantId||t.variant_id,quantity:t.quantity,properties:t.properties||void 0})));await fetch("/cart/add.js",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({items:e})})}window.location.reload()}catch(t){}}async function c(){if(localStorage.getItem("cart_sync_reloaded"))return void localStorage.removeItem("cart_sync_reloaded");if(e="undefined"!=typeof window&&window.CUSTOMER_ID?String(window.CUSTOMER_ID):null,!e)return;const[t,c]=await Promise.all([n(),a()]),r=t&&t.items&&t.items.length>0,s=c&&c.items&&c.items.length>0;if(r||s)if(!r||s){if(r||!s)return function(t,e){if(!t||!e)return!1;const n=(t.items?.length||0)===(e.items?.length||0),a=t.total_price?t.total_price/100:0,i=e.totalPrice||0;return n&&a===i}(t,c)?void 0:void await o(c);await o(c)}else await i(t)}function r(){const t=window.fetch;window.fetch=function(...e){let a="string"==typeof e[0]?e[0]:e[0]?.url;return a&&a.match(/\/cart\/(add|update|change|clear)(\.js)?/)&&setTimeout((async()=>{const t=await n();await i(t)}),1500),t.apply(this,e)};const e=window.XMLHttpRequest.prototype.open;window.XMLHttpRequest.prototype.open=function(t,a,...o){return this.addEventListener("load",(function(){a&&a.match(/\/cart\/(add|update|change)(\.js)?/)&&setTimeout((async()=>{const t=await n();await i(t)}),1500)})),e.call(this,t,a,...o)}}const s=()=>{c(),setTimeout(r,1e3)};"complete"===document.readyState?s():window.addEventListener("load",s)}();