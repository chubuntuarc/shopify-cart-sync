!function(){const t="https://arco-henna.vercel.app";let e=null;function n(){return"undefined"!=typeof window&&window.CUSTOMER_ID?String(window.CUSTOMER_ID):null}async function a(){try{const t=await fetch("/cart.js",{method:"GET",credentials:"include",headers:{Accept:"application/json"}});if(t.ok){return await t.json()}}catch(t){}return null}async function i(){if(!e)return null;try{const n=await fetch(`${t}/api/cart?userId=${encodeURIComponent(e)}`,{method:"GET",headers:{Accept:"application/json"}});if(n.ok){return(await n.json()).cart||null}}catch(t){}return null}async function o(n){if(!e)return null;try{await fetch(t+"/api/cart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,cartData:n||{}})})}catch(t){}}function c(t,e){if(!t||!e)return!1;const n=(t.items?.length||0)===(e.items?.length||0),a=t.total_price?t.total_price/100:0,i=e.totalPrice||0;return n&&a===i}async function r(t){try{if(localStorage.setItem("cart_sync_reloaded","1"),await fetch("/cart/clear.js",{method:"POST",credentials:"include"}),t&&t.items&&t.items.length>0){const e=t.items.map(t=>({id:t.shopifyVariantId||t.variantId||t.variant_id,quantity:t.quantity,properties:t.properties||void 0}));await fetch("/cart/add.js",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({items:e})})}window.location.reload()}catch(t){}}function s(){const t=window.fetch;window.fetch=function(...e){let n="string"==typeof e[0]?e[0]:e[0]?.url;return n&&n.match(/\/cart\/(add|update|change|clear)(\.js)?/)&&setTimeout(async()=>{const t=await a();await o(t)},1500),t.apply(this,e)};const e=window.XMLHttpRequest.prototype.open;window.XMLHttpRequest.prototype.open=function(t,n,...i){return this.addEventListener("load",function(){n&&n.match(/\/cart\/(add|update|change)(\.js)?/)&&setTimeout(async()=>{const t=await a();await o(t)},1500)}),e.call(this,t,n,...i)}}const d=()=>{!async function(){if(localStorage.getItem("cart_sync_reloaded"))return void localStorage.removeItem("cart_sync_reloaded");if(e=n(),!e)return;const[t,s]=await Promise.all([a(),i()]),d=t&&t.items&&t.items.length>0,l=s&&s.items&&s.items.length>0;if(d||l)if(!d||l){if(d||!l)return c(t,s)?void 0:void await r(s);await r(s)}else await o(t)}(),setTimeout(s,1e3),setInterval(async()=>{if("visible"!==document.visibilityState)return;if(e=n(),!e)return;const[t,o]=await Promise.all([a(),i()]);c(t,o)||await r(o)},15e3)};"complete"===document.readyState?d():window.addEventListener("load",d)}();